2023-06-23 15:50:55.026 [INF] Application is starting...
2023-06-23 15:51:02.362 [INF] Configured endpoint create-order-service, Consumer: Simpra.Api.Consumer.CreateOrderMessageCommandConsumer
2023-06-23 15:51:02.605 [DBG] Starting bus instances: IBus
2023-06-23 15:51:02.619 [DBG] Starting bus: "rabbitmq://localhost/"
2023-06-23 15:51:02.749 [DBG] Connect: guest@localhost:5672/
2023-06-23 15:51:03.013 [DBG] Connected: guest@localhost:5672/ (address: amqp://localhost:5672, local: 53330)
2023-06-23 15:51:03.114 [DBG] Endpoint Ready: "rabbitmq://localhost/DESKTOPBTL2BIK_SimpraApi_bus_goxyyybddraj3f9pbdpz84rybg?temporary=true"
2023-06-23 15:51:03.167 [DBG] Declare queue: name: create-order-service, durable, consumer-count: 0 message-count: 0
2023-06-23 15:51:03.205 [DBG] Declare exchange: name: create-order-service, type: fanout, durable
2023-06-23 15:51:03.221 [DBG] Declare exchange: name: Simpra.Service.Messages:CreateOrderMessageCommand, type: fanout, durable
2023-06-23 15:51:03.283 [DBG] Bind queue: source: create-order-service, destination: create-order-service
2023-06-23 15:51:03.327 [DBG] Bind exchange: source: Simpra.Service.Messages:CreateOrderMessageCommand, destination: create-order-service
2023-06-23 15:51:03.410 [DBG] Consumer Ok: "rabbitmq://localhost/create-order-service" - amq.ctag-EEq0kJSnvxfjKox1dOPe2A
2023-06-23 15:51:03.417 [DBG] Endpoint Ready: "rabbitmq://localhost/create-order-service"
2023-06-23 15:51:03.433 [INF] Bus started: "rabbitmq://localhost/"
2023-06-23 15:51:15.901 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:51:16.838 [INF] -------------Request-Begin------------
2023-06-23 15:51:16.840 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Authentication/SignIn 
QueryString:  
Request Body: {
  "userName": "user",
  "password": "User123456*"
}
2023-06-23 15:51:16.843 [INF] 

2023-06-23 15:51:16.846 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Authentication/SignIn 
QueryString:  
StatusCode: 200 
Response Body: {"data":{"expireTime":"2023-06-23T16:21:16.8070901+03:00","accessToken":"eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VyTmFtZSI6InVzZXIiLCJVc2VySWQiOiJjMGJmYzU3ZS04ODM1LTQ4ODMtOTAxYi00YTAxM2ZiMjVmZGEiLCJGaXJzdE5hbWUiOiJ1c2VyIiwiTGFzdE5hbWUiOiJ1c2VyIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoidXNlciIsImV4cCI6MTY4NzUyNjQ3NiwiaXNzIjoiU2ltcHJhUHJvamVjdCIsImF1ZCI6IlNpbXByYVByb2plY3QifQ.W3pZ-Fev8yYQGkSSBZq92azOPjbqX66LG6RZ4tEreKQ","userName":"user"},"errors":null}
2023-06-23 15:51:16.849 [INF] -------------Request-End------------
2023-06-23 15:51:45.525 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:51:46.226 [INF] -------------Request-Begin------------
2023-06-23 15:51:46.228 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Basket 
QueryString:  
Request Body: {
  "basketItems": [
    {
      "productId": 1,
      "quantity": 5,
      "unitPrice": 100
    }
  ]
}
2023-06-23 15:51:46.231 [INF] 

2023-06-23 15:51:46.233 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Basket 
QueryString:  
StatusCode: 204 
Response Body: 
2023-06-23 15:51:46.235 [INF] -------------Request-End------------
2023-06-23 15:51:55.661 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:51:55.691 [INF] -------------Request-Begin------------
2023-06-23 15:51:55.693 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Basket 
QueryString:  
Request Body: 
2023-06-23 15:51:55.695 [INF] 

2023-06-23 15:51:55.697 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Basket 
QueryString:  
StatusCode: 200 
Response Body: {"data":{"basketItems":[{"productId":1,"quantity":5,"unitPrice":100}],"totalPrice":500},"errors":null}
2023-06-23 15:51:55.699 [INF] -------------Request-End------------
2023-06-23 15:52:09.024 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:52:09.059 [INF] -------------Request-Begin------------
2023-06-23 15:52:09.061 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Authentication/SignIn 
QueryString:  
Request Body: {
  "userName": "admin",
  "password": "Admin123456*"
}
2023-06-23 15:52:09.065 [INF] 

2023-06-23 15:52:09.068 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Authentication/SignIn 
QueryString:  
StatusCode: 200 
Response Body: {"data":{"expireTime":"2023-06-23T16:22:09.0592657+03:00","accessToken":"eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VyTmFtZSI6ImFkbWluIiwiVXNlcklkIjoiNzE4Y2NmZjItZWYzNC00ZTM2LWExMTYtZmIyZDA4NTdlNmMyIiwiRmlyc3ROYW1lIjoiYWRtaW4iLCJMYXN0TmFtZSI6ImFkbWluIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiYWRtaW4iLCJleHAiOjE2ODc1MjY1MjksImlzcyI6IlNpbXByYVByb2plY3QiLCJhdWQiOiJTaW1wcmFQcm9qZWN0In0.IkLxS0OHWiSYc5goj6Th-H5CWOpqJcBxodibTSqDmwc","userName":"admin"},"errors":null}
2023-06-23 15:52:09.072 [INF] -------------Request-End------------
2023-06-23 15:52:24.366 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:52:24.405 [INF] -------------Request-Begin------------
2023-06-23 15:52:24.407 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/User 
QueryString:  
Request Body: 
2023-06-23 15:52:24.410 [INF] 

2023-06-23 15:52:24.412 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/User 
QueryString:  
StatusCode: 200 
Response Body: {"data":[{"id":"718ccff2-ef34-4e36-a116-fb2d0857e6c2","userName":"admin","firstName":"admin","lastName":"admin","email":"admin@gmail.com","phoneNumber":"05326556565","digitalWalletBalance":0.00,"digitalWalletInformation":"Wallet is not active."},{"id":"c0bfc57e-8835-4883-901b-4a013fb25fda","userName":"user","firstName":"user","lastName":"user","email":"user@gmail.com","phoneNumber":"05326576565","digitalWalletBalance":50.00,"digitalWalletInformation":"Wallet is active."}],"errors":null}
2023-06-23 15:52:24.417 [INF] -------------Request-End------------
2023-06-23 15:52:51.338 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:52:51.857 [INF] -------------Request-Begin------------
2023-06-23 15:52:51.859 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Coupon 
QueryString:  
Request Body: {
  "userId": "c0bfc57e-8835-4883-901b-4a013fb25fda",
  "discountAmount": 50,
  "expirationDay": 10
}
2023-06-23 15:52:51.862 [INF] 

2023-06-23 15:52:51.865 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Coupon 
QueryString:  
StatusCode: 200 
Response Body: {"data":{"couponCode":"40N1QN9I9Z","discountAmount":50,"expirationDate":"2023-07-03T15:52:51.3970468+03:00","isActive":true,"userId":"c0bfc57e-8835-4883-901b-4a013fb25fda","id":1},"errors":null}
2023-06-23 15:52:51.868 [INF] -------------Request-End------------
2023-06-23 15:53:29.766 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:53:29.826 [DBG] Create send transport: "rabbitmq://localhost/create-order-service?bind=true"
2023-06-23 15:53:29.954 [DBG] Declare queue: name: create-order-service, durable, consumer-count: 1 message-count: 0
2023-06-23 15:53:29.974 [DBG] Declare exchange: name: create-order-service, type: fanout, durable
2023-06-23 15:53:29.978 [DBG] Bind queue: source: create-order-service, destination: create-order-service
2023-06-23 15:53:30.128 [DBG] SEND "rabbitmq://localhost/create-order-service?bind=true" "341e0000-2319-309c-1ef7-08db73e8d827" Simpra.Service.Messages.CreateOrderMessageCommand
2023-06-23 15:53:30.145 [INF] -------------Request-Begin------------
2023-06-23 15:53:30.147 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Basket/CheckOut 
QueryString:  
Request Body: {
  "couponCode": "40N1QN9I9Z",
  "creditCard": {
    "cardNumber": "1412112525662255",
    "cvv": "055",
    "expiryMonth": "05",
    "expiryYear": "2025"
  }
}
2023-06-23 15:53:30.151 [INF] 

2023-06-23 15:53:30.152 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Basket/CheckOut 
QueryString:  
StatusCode: 204 
Response Body: 
2023-06-23 15:53:30.155 [INF] -------------Request-End------------
2023-06-23 15:53:30.802 [INF] Order (878047980) is successfully created with RabbitMQ!
2023-06-23 15:53:30.816 [DBG] RECEIVE "rabbitmq://localhost/create-order-service" "341e0000-2319-309c-1ef7-08db73e8d827" Simpra.Service.Messages.CreateOrderMessageCommand Simpra.Api.Consumer.CreateOrderMessageCommandConsumer("00:00:00.6118748")
2023-06-23 15:53:51.168 [INF] LogRequestLoggingMiddleware.Invoke
2023-06-23 15:53:51.309 [INF] -------------Request-Begin------------
2023-06-23 15:53:51.311 [INF] Http Request Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Order 
QueryString:  
Request Body: 
2023-06-23 15:53:51.314 [INF] 

2023-06-23 15:53:51.316 [INF] Http Response Information: 
Schema:https 
Host: localhost:7247 
Path: /api/Order 
QueryString:  
StatusCode: 200 
Response Body: {"data":[{"orderNumber":"878047980","status":"Pending","isActive":true,"totalAmount":500.00,"billingAmount":400.00,"couponAmount":50.00,"walletAmount":50.00,"couponCode":"40N1QN9I9Z","userId":"c0bfc57e-8835-4883-901b-4a013fb25fda","orderDetails":[{"productId":1,"quantity":5,"unitPrice":100.00}],"id":1}],"errors":null}
2023-06-23 15:53:51.319 [INF] -------------Request-End------------
